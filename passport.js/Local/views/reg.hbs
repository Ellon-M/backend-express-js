<form action="/register" method="post" id="reg-form">
	<div>
		{{#if error}}
		<p class="err-msg0">Username already exists</p>
		{{/if }}
		<h1>Register</h1>
	</div>
	<div class="form-group">
		<label>Username: </label>
		<input 
			type="text" 
			name="username" 
			id="username" 
			placeholder="Enter your username" 
			required />
	</div>
	<div class="form-group">
		<label>Password:</label>
		<input 
			type="password" 
			name="password" 
			id="password"
			placeholder="Enter your password" 
			required />
	</div>
	<div>
		<input type="submit" value="register" />
	</div>
</form>


<script>
    const form = document.getElementById('reg-form');
    form.addEventListener('submit', register);


// Send data as JSON
async function register(event) {
    // to prevent the page from refreshing - a default action
    event.preventDefault();
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    const result = await fetch('/register', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            username,
            password
        })

    }).then((res) => res.json())

    console.log(result);

</script>